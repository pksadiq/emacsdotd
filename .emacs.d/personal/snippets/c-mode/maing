# -*- mode: snippet -*-
# name: main function for Gtk
# key: m..
# condition: (progn (gnome-c-style-mode 1) t)
# --
#include <gtk/gtk.h>
#include "${1:$(downcase (get-first (str-to-style "snake" yas-text)))}-application.h${0:$$(unless (file-exists-p (concat (downcase (get-first gnome-package)) "-application.h")) (write-region "" nil (concat (downcase (get-first gnome-package)) "-application.h")))}"

int
main(int  argc,
char *argv[])
{
  ${1:GtkApplication$(str-to-style "upcamel" yas-text)} *app;
  int status;

  app = ${1:$(setq gnome-package (str-to-style "snake" yas-text))}_new ($2);
  status = g_application_run (G_APPLICATION (app), argc, argv);
  g_object_unref (app);

  return status;
}
